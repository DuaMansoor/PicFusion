{"ast":null,"code":"import _slicedToArray from\"C:/Users/DUA/Downloads/Instagram-mern-stack-main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import PostDetail from\"./PostDetail\";import\"./Profile.css\";import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserProfie(){var picLink=\"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";var _useParams=useParams(),userid=_useParams.userid;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFollow=_useState2[0],setIsFollow=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),posts=_useState6[0],setPosts=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPost=_useState8[0],setShowPost=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selectedPost=_useState10[0],setSelectedPost=_useState10[1];// Follow another user\nvar followUser=function followUser(userId){fetch(\"http://localhost:5000/follow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(function(res){return res.json();}).then(function(){return setIsFollow(true);});};// Unfollow another user\nvar unfollowUser=function unfollowUser(userId){fetch(\"http://localhost:5000/unfollow\",{method:\"put\",headers:{\"Content-Type\":\"application/json\",Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")},body:JSON.stringify({followId:userId})}).then(function(res){return res.json();}).then(function(){return setIsFollow(false);});};// Fetch user data\nuseEffect(function(){fetch(\"http://localhost:5000/user/\".concat(userid),{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"jwt\")}}).then(function(res){return res.json();}).then(function(result){setUser(result.user);setPosts(result.post);if(result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)){setIsFollow(true);}});},[isFollow,userid]);// Toggle PostDetail modal\nvar togglePostDetail=function togglePostDetail(){var post=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;setSelectedPost(post);setShowPost(function(prev){return!prev;});};return/*#__PURE__*/_jsxs(\"div\",{className:\"profile\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"profile-frame\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-pic\",children:/*#__PURE__*/_jsx(\"img\",{src:user.Photo?user.Photo:picLink,alt:\"\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"pofile-data\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",alignItems:\"center\",justifyContent:\"space-between\"},children:[/*#__PURE__*/_jsx(\"h1\",{children:user.name}),/*#__PURE__*/_jsx(\"button\",{className:\"followBtn\",onClick:function onClick(){if(isFollow)unfollowUser(user._id);else followUser(user._id);},children:isFollow?\"Unfollow\":\"Follow\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-info\",style:{display:\"flex\"},children:[/*#__PURE__*/_jsxs(\"p\",{children:[posts.length,\" posts\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.followers?user.followers.length:\"0\",\" followers\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[user.following?user.following.length:\"0\",\" following\"]})]})]})]}),/*#__PURE__*/_jsx(\"hr\",{style:{width:\"90%\",opacity:\"0.8\",margin:\"25px auto\"}}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery\",children:posts.map(function(post){return/*#__PURE__*/_jsx(\"img\",{src:post.photo,className:\"item\",onClick:function onClick(){return togglePostDetail(post);}},post._id);})}),showPost&&selectedPost&&/*#__PURE__*/_jsx(PostDetail,{item:selectedPost,toggleDetails:function toggleDetails(){return togglePostDetail();}})]});}","map":{"version":3,"names":["React","useState","useEffect","PostDetail","useParams","UserProfie","picLink","userid","isFollow","setIsFollow","user","setUser","posts","setPosts","showPost","setShowPost","selectedPost","setSelectedPost","followUser","userId","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","followId","then","res","json","unfollowUser","result","post","followers","includes","parse","_id","togglePostDetail","prev","Photo","display","alignItems","justifyContent","name","length","following","width","opacity","margin","map","photo"],"sources":["C:/Users/DUA/Downloads/Instagram-mern-stack-main/frontend/src/components/UserProfile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PostDetail from \"./PostDetail\";\nimport \"./Profile.css\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function UserProfie() {\n  const picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n  const { userid } = useParams();\n  const [isFollow, setIsFollow] = useState(false);\n  const [user, setUser] = useState(\"\");\n  const [posts, setPosts] = useState([]);\n  const [showPost, setShowPost] = useState(false);\n  const [selectedPost, setSelectedPost] = useState(null);\n\n  // Follow another user\n  const followUser = (userId) => {\n    fetch(\"http://localhost:5000/follow\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({ followId: userId }),\n    })\n      .then((res) => res.json())\n      .then(() => setIsFollow(true));\n  };\n\n  // Unfollow another user\n  const unfollowUser = (userId) => {\n    fetch(\"http://localhost:5000/unfollow\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({ followId: userId }),\n    })\n      .then((res) => res.json())\n      .then(() => setIsFollow(false));\n  };\n\n  // Fetch user data\n  useEffect(() => {\n    fetch(`http://localhost:5000/user/${userid}`, {\n      headers: { Authorization: \"Bearer \" + localStorage.getItem(\"jwt\") },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setUser(result.user);\n        setPosts(result.post);\n        if (\n          result.user.followers.includes(\n            JSON.parse(localStorage.getItem(\"user\"))._id\n          )\n        ) {\n          setIsFollow(true);\n        }\n      });\n  }, [isFollow, userid]);\n\n  // Toggle PostDetail modal\n  const togglePostDetail = (post = null) => {\n    setSelectedPost(post);\n    setShowPost((prev) => !prev);\n  };\n\n  return (\n    <div className=\"profile\">\n      {/* Profile frame */}\n      <div className=\"profile-frame\">\n        <div className=\"profile-pic\">\n          <img src={user.Photo ? user.Photo : picLink} alt=\"\" />\n        </div>\n        <div className=\"pofile-data\">\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <h1>{user.name}</h1>\n            <button\n              className=\"followBtn\"\n              onClick={() => {\n                if (isFollow) unfollowUser(user._id);\n                else followUser(user._id);\n              }}\n            >\n              {isFollow ? \"Unfollow\" : \"Follow\"}\n            </button>\n          </div>\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\n            <p>{posts.length} posts</p>\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\n            <p>{user.following ? user.following.length : \"0\"} following</p>\n          </div>\n        </div>\n      </div>\n\n      <hr style={{ width: \"90%\", opacity: \"0.8\", margin: \"25px auto\" }} />\n\n      {/* Gallery */}\n      <div className=\"gallery\">\n        {posts.map((post) => (\n          <img\n            key={post._id}\n            src={post.photo}\n            className=\"item\"\n            onClick={() => togglePostDetail(post)}\n          />\n        ))}\n      </div>\n\n      {/* PostDetail modal */}\n      {showPost && selectedPost && (\n        <PostDetail\n          item={selectedPost}\n          toggleDetails={() => togglePostDetail()}\n        />\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
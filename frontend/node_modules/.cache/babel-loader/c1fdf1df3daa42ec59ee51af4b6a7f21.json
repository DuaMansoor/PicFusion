{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DUA\\\\Downloads\\\\Instagram-mern-stack-main\\\\frontend\\\\src\\\\components\\\\UserProfile.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport PostDetail from \"./PostDetail\";\nimport \"./Profile.css\";\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UserProfie() {\n  _s();\n\n  const picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n  const {\n    userid\n  } = useParams();\n  const [isFollow, setIsFollow] = useState(false);\n  const [user, setUser] = useState(\"\");\n  const [posts, setPosts] = useState([]);\n  const [showPost, setShowPost] = useState(false);\n  const [selectedPost, setSelectedPost] = useState(null); // Follow another user\n\n  const followUser = userId => {\n    fetch(\"http://localhost:5000/follow\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        followId: userId\n      })\n    }).then(res => res.json()).then(() => setIsFollow(true));\n  }; // Unfollow another user\n\n\n  const unfollowUser = userId => {\n    fetch(\"http://localhost:5000/unfollow\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      },\n      body: JSON.stringify({\n        followId: userId\n      })\n    }).then(res => res.json()).then(() => setIsFollow(false));\n  }; // Fetch user data\n\n\n  useEffect(() => {\n    fetch(`http://localhost:5000/user/${userid}`, {\n      headers: {\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\")\n      }\n    }).then(res => res.json()).then(result => {\n      setUser(result.user);\n      setPosts(result.post);\n\n      if (result.user.followers.includes(JSON.parse(localStorage.getItem(\"user\"))._id)) {\n        setIsFollow(true);\n      }\n    });\n  }, [isFollow, userid]); // Toggle PostDetail modal\n\n  const togglePostDetail = function () {\n    let post = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    setSelectedPost(post);\n    setShowPost(prev => !prev);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profile\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"profile-frame\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"profile-pic\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: user.Photo ? user.Photo : picLink,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pofile-data\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"space-between\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: user.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"followBtn\",\n            onClick: () => {\n              if (isFollow) unfollowUser(user._id);else followUser(user._id);\n            },\n            children: isFollow ? \"Unfollow\" : \"Follow\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"profile-info\",\n          style: {\n            display: \"flex\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [posts.length, \" posts\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [user.followers ? user.followers.length : \"0\", \" followers\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [user.following ? user.following.length : \"0\", \" following\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n      style: {\n        width: \"90%\",\n        opacity: \"0.8\",\n        margin: \"25px auto\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"gallery\",\n      children: posts.map(post => /*#__PURE__*/_jsxDEV(\"img\", {\n        src: post.photo,\n        className: \"item\",\n        onClick: () => togglePostDetail(post)\n      }, post._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), showPost && selectedPost && /*#__PURE__*/_jsxDEV(PostDetail, {\n      item: selectedPost,\n      toggleDetails: () => togglePostDetail()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n}\n\n_s(UserProfie, \"y8A/VvXfWhR/ILXgSMrGeoAQarY=\", false, function () {\n  return [useParams];\n});\n\n_c = UserProfie;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProfie\");","map":{"version":3,"names":["React","useState","useEffect","PostDetail","useParams","UserProfie","picLink","userid","isFollow","setIsFollow","user","setUser","posts","setPosts","showPost","setShowPost","selectedPost","setSelectedPost","followUser","userId","fetch","method","headers","Authorization","localStorage","getItem","body","JSON","stringify","followId","then","res","json","unfollowUser","result","post","followers","includes","parse","_id","togglePostDetail","prev","Photo","display","alignItems","justifyContent","name","length","following","width","opacity","margin","map","photo"],"sources":["C:/Users/DUA/Downloads/Instagram-mern-stack-main/frontend/src/components/UserProfile.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport PostDetail from \"./PostDetail\";\nimport \"./Profile.css\";\nimport { useParams } from \"react-router-dom\";\n\nexport default function UserProfie() {\n  const picLink = \"https://cdn-icons-png.flaticon.com/128/3177/3177440.png\";\n  const { userid } = useParams();\n  const [isFollow, setIsFollow] = useState(false);\n  const [user, setUser] = useState(\"\");\n  const [posts, setPosts] = useState([]);\n  const [showPost, setShowPost] = useState(false);\n  const [selectedPost, setSelectedPost] = useState(null);\n\n  // Follow another user\n  const followUser = (userId) => {\n    fetch(\"http://localhost:5000/follow\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({ followId: userId }),\n    })\n      .then((res) => res.json())\n      .then(() => setIsFollow(true));\n  };\n\n  // Unfollow another user\n  const unfollowUser = (userId) => {\n    fetch(\"http://localhost:5000/unfollow\", {\n      method: \"put\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: \"Bearer \" + localStorage.getItem(\"jwt\"),\n      },\n      body: JSON.stringify({ followId: userId }),\n    })\n      .then((res) => res.json())\n      .then(() => setIsFollow(false));\n  };\n\n  // Fetch user data\n  useEffect(() => {\n    fetch(`http://localhost:5000/user/${userid}`, {\n      headers: { Authorization: \"Bearer \" + localStorage.getItem(\"jwt\") },\n    })\n      .then((res) => res.json())\n      .then((result) => {\n        setUser(result.user);\n        setPosts(result.post);\n        if (\n          result.user.followers.includes(\n            JSON.parse(localStorage.getItem(\"user\"))._id\n          )\n        ) {\n          setIsFollow(true);\n        }\n      });\n  }, [isFollow, userid]);\n\n  // Toggle PostDetail modal\n  const togglePostDetail = (post = null) => {\n    setSelectedPost(post);\n    setShowPost((prev) => !prev);\n  };\n\n  return (\n    <div className=\"profile\">\n      {/* Profile frame */}\n      <div className=\"profile-frame\">\n        <div className=\"profile-pic\">\n          <img src={user.Photo ? user.Photo : picLink} alt=\"\" />\n        </div>\n        <div className=\"pofile-data\">\n          <div\n            style={{\n              display: \"flex\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <h1>{user.name}</h1>\n            <button\n              className=\"followBtn\"\n              onClick={() => {\n                if (isFollow) unfollowUser(user._id);\n                else followUser(user._id);\n              }}\n            >\n              {isFollow ? \"Unfollow\" : \"Follow\"}\n            </button>\n          </div>\n          <div className=\"profile-info\" style={{ display: \"flex\" }}>\n            <p>{posts.length} posts</p>\n            <p>{user.followers ? user.followers.length : \"0\"} followers</p>\n            <p>{user.following ? user.following.length : \"0\"} following</p>\n          </div>\n        </div>\n      </div>\n\n      <hr style={{ width: \"90%\", opacity: \"0.8\", margin: \"25px auto\" }} />\n\n      {/* Gallery */}\n      <div className=\"gallery\">\n        {posts.map((post) => (\n          <img\n            key={post._id}\n            src={post.photo}\n            className=\"item\"\n            onClick={() => togglePostDetail(post)}\n          />\n        ))}\n      </div>\n\n      {/* PostDetail modal */}\n      {showPost && selectedPost && (\n        <PostDetail\n          item={selectedPost}\n          toggleDetails={() => togglePostDetail()}\n        />\n      )}\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}